!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Mock=t.Mock||{})}(this,function(t){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},r=Object.prototype.hasOwnProperty;function n(t){return decodeURIComponent(t.replace(/\+/g," "))}var i={stringify:function(t,e){var o=[];"string"!=typeof(e=e||"")&&(e="?");for(var n in t)r.call(t,n)&&o.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return o.length?e+o.join("&"):""},parse:function(t){for(var e,o=/([^=?&]+)=?([^&]*)/g,r={};e=o.exec(t);){var i=n(e[1]),s=n(e[2]);i in r||(r[i]=s)}return r}},s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function h(t){var o,r=e&&e.location||{},n={},i=typeof(t=t||r);if("blob:"===t.protocol)n=new u(unescape(t.pathname),{});else if("string"===i){n=new u(t,{});for(o in p)delete n[o]}else if("object"===i){for(o in t)o in p||(n[o]=t[o]);void 0===n.slashes&&(n.slashes=a.test(t.href))}return n}function l(t){var e=s.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function u(t,e,r){if(!(this instanceof u))return new u(t,e,r);var n,s,a,p,f,d,y=c.slice(),v=typeof e,E=this,S=0;for("object"!==v&&"string"!==v&&(r=e,e=null),r&&"function"!=typeof r&&(r=i.parse),e=h(e),n=!(s=l(t||"")).protocol&&!s.slashes,E.slashes=s.slashes||n&&e.slashes,E.protocol=s.protocol||e.protocol||"",t=s.rest,s.slashes||(y[2]=[/(.*)/,"pathname"]);S<y.length;S++)a=(p=y[S])[0],d=p[1],a!=a?E[d]=t:"string"==typeof a?~(f=t.indexOf(a))&&("number"==typeof p[2]?(E[d]=t.slice(0,f),t=t.slice(f+p[2])):(E[d]=t.slice(f),t=t.slice(0,f))):(f=a.exec(t))&&(E[d]=f[1],t=t.slice(0,f.index)),E[d]=E[d]||n&&p[3]&&e[d]||"",p[4]&&(E[d]=E[d].toLowerCase());r&&(E.query=r(E.query)),n&&e.slashes&&"/"!==E.pathname.charAt(0)&&(""!==E.pathname||""!==e.pathname)&&(E.pathname=function(t,e){for(var o=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=o.length,n=o[r-1],i=!1,s=0;r--;)"."===o[r]?o.splice(r,1):".."===o[r]?(o.splice(r,1),s++):s&&(0===r&&(i=!0),o.splice(r,1),s--);return i&&o.unshift(""),"."!==n&&".."!==n||o.push(""),o.join("/")}(E.pathname,e.pathname)),o(E.port,E.protocol)||(E.host=E.hostname,E.port=""),E.username=E.password="",E.auth&&(p=E.auth.split(":"),E.username=p[0]||"",E.password=p[1]||""),E.origin=E.protocol&&E.host&&"file:"!==E.protocol?E.protocol+"//"+E.host:"null",E.href=E.toString()}u.prototype={set:function(t,e,r){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||i.parse)(e)),n[t]=e;break;case"port":n[t]=e,o(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(e){var s="pathname"===t?"/":"#";n[t]=e.charAt(0)!==s?s+e:e}else n[t]=e;break;default:n[t]=e}for(var a=0;a<c.length;a++){var p=c[a];p[4]&&(n[p[1]]=n[p[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=i.stringify);var e,o=this,r=o.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var n=r+(o.slashes?"//":"");return o.username&&(n+=o.username,o.password&&(n+=":"+o.password),n+="@"),n+=o.host+o.pathname,(e="object"==typeof o.query?t(o.query):o.query)&&(n+="?"!==e.charAt(0)?"?"+e:e),o.hash&&(n+=o.hash),n}},u.extractProtocol=l,u.location=h,u.qs=i;var f=u;function d(t,e){setTimeout(function(e){return t.call(e)},4,e)}function y(t,e){"undefined"!=typeof process&&"test"!==process.env.NODE_ENV&&console[t].call(null,e)}function v(t,e){var o=[];return t.forEach(function(t){e(t)||o.push(t)}),o}var E=function(){this.listeners={}};E.prototype.addEventListener=function(t,e){var o,r,n;"function"==typeof e&&(Array.isArray(this.listeners[t])||(this.listeners[t]=[]),0===(o=this.listeners[t],r=function(t){return t===e},n=[],o.forEach(function(t){r(t)&&n.push(t)}),n).length&&this.listeners[t].push(e))},E.prototype.removeEventListener=function(t,e){var o=this.listeners[t];this.listeners[t]=v(o,function(t){return t===e})},E.prototype.dispatchEvent=function(t){for(var e=this,o=[],r=arguments.length-1;r-- >0;)o[r]=arguments[r+1];var n=t.type,i=this.listeners[n];return!!Array.isArray(i)&&(i.forEach(function(r){o.length>0?r.apply(e,o):r.call(e,t)}),!0)};var S=function(){this.urlMap={}};S.prototype.attachWebSocket=function(t,e){var o=this.urlMap[e];if(o&&o.server&&-1===o.websockets.indexOf(t))return o.websockets.push(t),o.server},S.prototype.addMembershipToRoom=function(t,e){var o=this.urlMap[t.url];o&&o.server&&-1!==o.websockets.indexOf(t)&&(o.roomMemberships[e]||(o.roomMemberships[e]=[]),o.roomMemberships[e].push(t))},S.prototype.attachServer=function(t,e){if(!this.urlMap[e])return this.urlMap[e]={server:t,websockets:[],roomMemberships:{}},t},S.prototype.serverLookup=function(t){var e=this.urlMap[t];if(e)return e.server},S.prototype.websocketsLookup=function(t,e,o){var r,n=this.urlMap[t];(r=n?n.websockets:[],e)&&(r=n.roomMemberships[e]||[]);return o?r.filter(function(t){return t!==o}):r},S.prototype.removeServer=function(t){delete this.urlMap[t]},S.prototype.removeWebSocket=function(t,e){var o=this.urlMap[e];o&&(o.websockets=v(o.websockets,function(e){return e===t}))},S.prototype.removeMembershipFromRoom=function(t,e){var o=this.urlMap[t.url],r=o.roomMemberships[e];o&&null!==r&&(o.roomMemberships[e]=v(r,function(e){return e===t}))};var b=new S,O={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,UNSUPPORTED_DATA:1007,POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,MISSING_EXTENSION:1010,INTERNAL_ERROR:1011,SERVICE_RESTART:1012,TRY_AGAIN_LATER:1013,TLS_HANDSHAKE:1015},g={CONSTRUCTOR_ERROR:"Failed to construct 'WebSocket':",CLOSE_ERROR:"Failed to execute 'close' on 'WebSocket':",EVENT:{CONSTRUCT:"Failed to construct 'Event':",MESSAGE:"Failed to construct 'MessageEvent':",CLOSE:"Failed to construct 'CloseEvent':"}},m=function(){};m.prototype.stopPropagation=function(){},m.prototype.stopImmediatePropagation=function(){},m.prototype.initEvent=function(t,e,o){void 0===t&&(t="undefined"),void 0===e&&(e=!1),void 0===o&&(o=!1),this.type=""+t,this.bubbles=Boolean(e),this.cancelable=Boolean(o)};var w=function(t){function e(e,o){if(void 0===o&&(o={}),t.call(this),!e)throw new TypeError(g.EVENT_ERROR+" 1 argument required, but only 0 present.");if("object"!=typeof o)throw new TypeError(g.EVENT_ERROR+" parameter 2 ('eventInitDict') is not an object.");var r=o.bubbles,n=o.cancelable;this.type=""+e,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!n&&Boolean(n),this.canncelBubble=!1,this.bubbles=!!r&&Boolean(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(m),C=function(t){function e(e,o){if(void 0===o&&(o={}),t.call(this),!e)throw new TypeError(g.EVENT.MESSAGE+" 1 argument required, but only 0 present.");if("object"!=typeof o)throw new TypeError(g.EVENT.MESSAGE+" parameter 2 ('eventInitDict') is not an object");var r=o.bubbles,n=o.cancelable,i=o.data,s=o.origin,a=o.lastEventId,c=o.ports;this.type=""+e,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!n&&Boolean(n),this.canncelBubble=!1,this.bubbles=!!r&&Boolean(r),this.origin=""+s,this.ports=void 0===c?null:c,this.data=void 0===i?null:i,this.lastEventId=""+(a||"")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(m),L=function(t){function e(e,o){if(void 0===o&&(o={}),t.call(this),!e)throw new TypeError(g.EVENT.CLOSE+" 1 argument required, but only 0 present.");if("object"!=typeof o)throw new TypeError(g.EVENT.CLOSE+" parameter 2 ('eventInitDict') is not an object");var r=o.bubbles,n=o.cancelable,i=o.code,s=o.reason,a=o.wasClean;this.type=""+e,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!n&&Boolean(n),this.canncelBubble=!1,this.bubbles=!!r&&Boolean(r),this.code="number"==typeof i?parseInt(i,10):0,this.reason=""+(s||""),this.wasClean=!!a&&Boolean(a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(m);function R(t){var e=t.type,o=t.target,r=new w(e);return o&&(r.target=o,r.srcElement=o,r.currentTarget=o),r}function N(t){var e=t.type,o=t.origin,r=t.data,n=t.target,i=new C(e,{data:r,origin:o});return n&&(i.target=n,i.srcElement=n,i.currentTarget=n),i}function T(t){var e=t.code,o=t.reason,r=t.type,n=t.target,i=t.wasClean;i||(i=1e3===e);var s=new L(r,{code:e,reason:o,wasClean:i});return n&&(s.target=n,s.srcElement=n,s.currentTarget=n),s}function k(t,e,o){t.readyState=A.CLOSING;var r=b.serverLookup(t.url),n=T({type:"close",target:t,code:e,reason:o});d(function(){b.removeWebSocket(t,t.url),t.readyState=A.CLOSED,t.dispatchEvent(n),r&&r.dispatchEvent(n,r)},t)}function _(t){return"[object Blob]"===Object.prototype.toString.call(t)||t instanceof ArrayBuffer||(t=String(t)),t}var A=function(t){function e(o,r){t.call(this),this.url=function(t){var e=new f(t),o=e.pathname,r=e.protocol,n=e.hash;if(!t)throw new TypeError(g.CONSTRUCTOR_ERROR+" 1 argument required, but only 0 present.");if(o||(e.pathname="/"),""===r)throw new SyntaxError(g.CONSTRUCTOR_ERROR+" The URL '"+e.toString()+"' is invalid.");if("ws:"!==r&&"wss:"!==r)throw new SyntaxError(g.CONSTRUCTOR_ERROR+" The URL's scheme must be either 'ws' or 'wss'. '"+r+"' is not allowed.");if(""!==n)throw new SyntaxError(g.CONSTRUCTOR_ERROR+" The URL contains a fragment identifier ('"+n+"'). Fragment identifiers are not allowed in WebSocket URLs.");return e.toString()}(o),r=function(t){if(void 0===t&&(t=[]),!Array.isArray(t)&&"string"!=typeof t)throw new SyntaxError(g.CONSTRUCTOR_ERROR+" The subprotocol '"+t.toString()+"' is invalid.");"string"==typeof t&&(t=[t]);var e=t.map(function(t){return{count:1,protocol:t}}).reduce(function(t,e){return t[e.protocol]=(t[e.protocol]||0)+e.count,t},{}),o=Object.keys(e).filter(function(t){return e[t]>1});if(o.length>0)throw new SyntaxError(g.CONSTRUCTOR_ERROR+" The subprotocol '"+o[0]+"' is duplicated.");return t}(r),this.protocol=r[0]||"",this.binaryType="blob",this.readyState=e.CONNECTING;var n=b.attachWebSocket(this,this.url);d(function(){if(n)if(n.options.verifyClient&&"function"==typeof n.options.verifyClient&&!n.options.verifyClient())this.readyState=e.CLOSED,y("error","WebSocket connection to '"+this.url+"' failed: HTTP Authentication failed; no valid credentials available"),b.removeWebSocket(this,this.url),this.dispatchEvent(R({type:"error",target:this})),this.dispatchEvent(T({type:"close",target:this,code:O.CLOSE_NORMAL}));else{if(n.options.selectProtocol&&"function"==typeof n.options.selectProtocol){var t=n.options.selectProtocol(r),o=""!==t,i=-1!==r.indexOf(t);if(o&&!i)return this.readyState=e.CLOSED,y("error","WebSocket connection to '"+this.url+"' failed: Invalid Sub-Protocol"),b.removeWebSocket(this,this.url),this.dispatchEvent(R({type:"error",target:this})),void this.dispatchEvent(T({type:"close",target:this,code:O.CLOSE_NORMAL}));this.protocol=t}this.readyState=e.OPEN,this.dispatchEvent(R({type:"open",target:this})),n.dispatchEvent(R({type:"connection"}),(s=this,new Proxy(s,{get:function(t,e){return"close"===e?function(t){void 0===t&&(t={});var e=t.code||O.CLOSE_NORMAL,o=t.reason||"";k(s,e,o)}:"send"===e?function(t){t=_(t),s.dispatchEvent(N({type:"message",data:t,origin:this.url,target:s}))}:"on"===e?function(t,e){s.addEventListener("server::"+t,e)}:t[e]}})))}else this.readyState=e.CLOSED,this.dispatchEvent(R({type:"error",target:this})),this.dispatchEvent(T({type:"close",target:this,code:O.CLOSE_NORMAL})),y("error","WebSocket connection to '"+this.url+"' failed");var s},this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={onopen:{},onmessage:{},onclose:{},onerror:{}};return o.onopen.get=function(){return this.listeners.open},o.onmessage.get=function(){return this.listeners.message},o.onclose.get=function(){return this.listeners.close},o.onerror.get=function(){return this.listeners.error},o.onopen.set=function(t){delete this.listeners.open,this.addEventListener("open",t)},o.onmessage.set=function(t){delete this.listeners.message,this.addEventListener("message",t)},o.onclose.set=function(t){delete this.listeners.close,this.addEventListener("close",t)},o.onerror.set=function(t){delete this.listeners.error,this.addEventListener("error",t)},e.prototype.send=function(t){var o=this;if(this.readyState===e.CLOSING||this.readyState===e.CLOSED)throw new Error("WebSocket is already in CLOSING or CLOSED state");var r=N({type:"server::message",origin:this.url,data:_(t)}),n=b.serverLookup(this.url);n&&d(function(){o.dispatchEvent(r,t)},n)},e.prototype.close=function(t,o){if(void 0!==t&&("number"!=typeof t||1e3!==t&&(t<3e3||t>4999)))throw new TypeError(g.CLOSE_ERROR+" The code must be either 1000, or between 3000 and 4999. "+t+" is neither.");var r,n;if(void 0!==o&&(r=o,n=encodeURIComponent(r).match(/%[89ABab]/g),r.length+(n?n.length:0))>123)throw new SyntaxError(g.CLOSE_ERROR+" The message must not be greater than 123 bytes.");this.readyState!==e.CLOSING&&this.readyState!==e.CLOSED&&(this.readyState===e.CONNECTING?function(t,e,o){t.readyState=A.CLOSING;var r=b.serverLookup(t.url),n=T({type:"close",target:t,code:e,reason:o,wasClean:!1}),i=R({type:"error",target:t});d(function(){b.removeWebSocket(t,t.url),t.readyState=A.CLOSED,t.dispatchEvent(i),t.dispatchEvent(n),r&&r.dispatchEvent(n,r)},t)}(this,t,o):k(this,t,o))},Object.defineProperties(e.prototype,o),e}(E);A.CONNECTING=0,A.prototype.CONNECTING=A.CONNECTING,A.OPEN=1,A.prototype.OPEN=A.OPEN,A.CLOSING=2,A.prototype.CLOSING=A.CLOSING,A.CLOSED=3,A.prototype.CLOSED=A.CLOSED;function I(){return"undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this}var M=function(t){function e(e,o){void 0===o&&(o={}),t.call(this);var r=new f(e);if(r.pathname||(r.pathname="/"),this.url=r.toString(),this.originalWebSocket=null,!b.attachServer(this,this.url))throw this.dispatchEvent(R({type:"error"})),new Error("A mock server is already listening on this url");void 0===o.verifyClient&&(o.verifyClient=null),void 0===o.selectProtocol&&(o.selectProtocol=null),this.options=o,this.start()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.start=function(){var t=I();t.WebSocket&&(this.originalWebSocket=t.WebSocket),t.WebSocket=A},e.prototype.stop=function(t){void 0===t&&(t=function(){});var e=I();this.originalWebSocket?e.WebSocket=this.originalWebSocket:delete e.WebSocket,this.originalWebSocket=null,b.removeServer(this.url),"function"==typeof t&&t()},e.prototype.on=function(t,e){this.addEventListener(t,e)},e.prototype.close=function(t){void 0===t&&(t={});var e=t.code,o=t.reason,r=t.wasClean,n=b.websocketsLookup(this.url);b.removeServer(this.url),n.forEach(function(t){t.readyState=A.CLOSE,t.dispatchEvent(T({type:"close",target:t,code:e||O.CLOSE_NORMAL,reason:o||"",wasClean:r}))}),this.dispatchEvent(T({type:"close"}),this)},e.prototype.emit=function(t,e,o){var r=this;void 0===o&&(o={});var n=o.websockets;n||(n=b.websocketsLookup(this.url)),e="object"!=typeof o||arguments.length>3?(e=Array.prototype.slice.call(arguments,1,arguments.length)).map(function(t){return _(t)}):_(e),n.forEach(function(o){Array.isArray(e)?o.dispatchEvent.apply(o,[N({type:t,data:e,origin:r.url,target:o})].concat(e)):o.dispatchEvent(N({type:t,data:e,origin:r.url,target:o}))})},e.prototype.clients=function(){return b.websocketsLookup(this.url)},e.prototype.to=function(t,e,o){var r=this;void 0===o&&(o=[]);var n=this,i=o.concat(b.websocketsLookup(this.url,t,e)).reduce(function(t,e){return t.indexOf(e)>-1?t:t.concat(e)},[]);return{to:function(t,e){return r.to.call(r,t,e,i)},emit:function(t,e){n.emit(t,e,{websockets:i})}}},e.prototype.in=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.to.apply(null,t)},e.prototype.simulate=function(t){var e=b.websocketsLookup(this.url);"error"===t&&e.forEach(function(t){t.readyState=A.CLOSE,t.dispatchEvent(R({type:"error"}))})},e}(E);M.of=function(t){return new M(t)};var P=function(t){function e(o,r){var n=this;void 0===o&&(o="socket.io"),void 0===r&&(r=""),t.call(this),this.binaryType="blob";var i=new f(o);i.pathname||(i.pathname="/"),this.url=i.toString(),this.readyState=e.CONNECTING,this.protocol="","string"==typeof r||"object"==typeof r&&null!==r?this.protocol=r:Array.isArray(r)&&r.length>0&&(this.protocol=r[0]);var s=b.attachWebSocket(this,this.url);d(function(){s?(this.readyState=e.OPEN,s.dispatchEvent(R({type:"connection"}),s,this),s.dispatchEvent(R({type:"connect"}),s,this),this.dispatchEvent(R({type:"connect",target:this}))):(this.readyState=e.CLOSED,this.dispatchEvent(R({type:"error",target:this})),this.dispatchEvent(T({type:"close",target:this,code:O.CLOSE_NORMAL})),y("error","Socket.io connection to '"+this.url+"' failed"))},this),this.addEventListener("close",function(t){n.dispatchEvent(T({type:"disconnect",target:t.target,code:t.code}))})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={broadcast:{}};return e.prototype.close=function(){if(this.readyState===e.OPEN){var t=b.serverLookup(this.url);return b.removeWebSocket(this,this.url),this.readyState=e.CLOSED,this.dispatchEvent(T({type:"close",target:this,code:O.CLOSE_NORMAL})),t&&t.dispatchEvent(T({type:"disconnect",target:this,code:O.CLOSE_NORMAL}),t),this}},e.prototype.disconnect=function(){return this.close()},e.prototype.emit=function(t){for(var o=[],r=arguments.length-1;r-- >0;)o[r]=arguments[r+1];if(this.readyState!==e.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var n=N({type:t,origin:this.url,data:o}),i=b.serverLookup(this.url);return i&&i.dispatchEvent.apply(i,[n].concat(o)),this},e.prototype.send=function(t){return this.emit("message",t),this},o.broadcast.get=function(){if(this.readyState!==e.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var t=this,o=b.serverLookup(this.url);if(!o)throw new Error("SocketIO can not find a server at the specified URL ("+this.url+")");return{emit:function(e,r){return o.emit(e,r,{websockets:b.websocketsLookup(t.url,null,t)}),t},to:function(e){return o.to(e,t)},in:function(e){return o.in(e,t)}}},e.prototype.on=function(t,e){return this.addEventListener(t,e),this},e.prototype.off=function(t){this.removeEventListener(t)},e.prototype.join=function(t){b.addMembershipToRoom(this,t)},e.prototype.leave=function(t){b.removeMembershipFromRoom(this,t)},e.prototype.to=function(t){return this.broadcast.to(t)},e.prototype.in=function(){return this.to.apply(null,arguments)},e.prototype.dispatchEvent=function(t){for(var e=this,o=[],r=arguments.length-1;r-- >0;)o[r]=arguments[r+1];var n=t.type,i=this.listeners[n];if(!Array.isArray(i))return!1;i.forEach(function(r){o.length>0?r.apply(e,o):r.call(e,t.data?t.data:t)})},Object.defineProperties(e.prototype,o),e}(E);P.CONNECTING=0,P.OPEN=1,P.CLOSING=2,P.CLOSED=3;var j=function(t,e){return new P(t,e)};j.connect=function(t,e){return j(t,e)};var W=M,D=A,G=j;t.Server=W,t.WebSocket=D,t.SocketIO=G,Object.defineProperty(t,"__esModule",{value:!0})});
